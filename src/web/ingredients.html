<!DOCTYPE html>
<html lang="en">

    <head>
        <title>Ingredients - Mixology Tools</title>
        <!-- Common head elements will be loaded by common.js -->
    </head>

    <body>
        <!-- Header will be loaded by common.js -->

        <main>
            <section class="ingredients-section">
                <h2 id="ingredients-title">Ingredients</h2>

                <div class="ingredient-form">
                    <h3>Add New Ingredient</h3>
                    <form id="ingredient-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="ingredient-name">Name:</label>
                                <input type="text" id="ingredient-name"
                                    required>
                            </div>

                            <div class="form-group">
                                <label for="ingredient-parent">Parent:</label>
                                <div class="ingredient-search-container">
                                    <input type="text"
                                        id="ingredient-parent-search"
                                        placeholder="Search parent ingredient..."
                                        autocomplete="off">
                                    <div class="loading-indicator"
                                        id="parent-loading-indicator">
                                        <div class="loading-spinner"></div>
                                    </div>
                                    <div class="search-status"
                                        id="parent-search-status">Loading
                                        ingredients...</div>
                                    <div class="autocomplete-dropdown"
                                        id="parent-autocomplete-dropdown"></div>
                                    <select id="ingredient-parent"
                                        style="display: none;">
                                        <option value>None</option>
                                        <!-- Parent options will be populated via JS -->
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label
                                for="ingredient-description">Description:</label>
                            <textarea id="ingredient-description"
                                rows="3"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="ingredient-substitution-level">Substitution Level:</label>
                            <select id="ingredient-substitution-level">
                                <option value="0">0 - No substitution (exact match required)</option>
                                <option value="1">1 - Allow brand substitution within parent category</option>
                                <option value="2">2 - Allow substitution at grandparent level</option>
                                <option value="">NULL - Inherit from parent</option>
                            </select>
                            <small class="form-help">
                                Controls when this ingredient can be substituted in recipes. 
                                Level 0 requires exact match (e.g., Aperol), Level 1 allows brands within same category (e.g., any light rum), Level 2 allows broader substitution.
                            </small>
                        </div>

                        <button type="submit">Add Ingredient</button>
                    </form>
                </div>

                <div class="ingredients-list">
                    <h3>Existing Ingredients</h3>
                    <div class="search-bar">
                        <input type="text" id="ingredient-search"
                            placeholder="Search ingredients...">
                    </div>
                    <div id="ingredients-container">
                        <!-- Ingredients will be loaded here -->
                    </div>
                </div>
            </section>
        </main>

        <script type="module" src="js/common.js"></script>
        <script type="module" src="js/api.js"></script>
        <script type="module" src="js/ingredients.js"></script>
    </body>

</html>